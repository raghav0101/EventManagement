<!DOCTYPE html>
	<!--[if IE 8]>
		<html xmlns="http://www.w3.org/1999/xhtml" class="ie8" lang="en-US">
	<![endif]-->
	<!--[if !(IE 8) ]><!-->
		<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
	<!--<![endif]-->
	
<!-- Mirrored from demo.ovathemes.com/eventmana/wp-login.php?registration=disabled by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 26 Oct 2019 06:07:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Log In &lsaquo; Event Management WordPress Theme &#8212; WordPress</title>
	<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel='stylesheet' id='dashicons-css'  href='wp-includes/css/dashicons.min4d2c.css?ver=5.2.4' type='text/css' media='all' />
<link rel='stylesheet' id='buttons-css'  href='wp-includes/css/buttons.min4d2c.css?ver=5.2.4' type='text/css' media='all' />
<link rel='stylesheet' id='forms-css'  href='wp-admin/css/forms.min4d2c.css?ver=5.2.4' type='text/css' media='all' />
<link rel='stylesheet' id='izi'  href='https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css' type='text/css' media='all' />
<link rel='stylesheet' id='l10n-css'  href='wp-admin/css/l10n.min4d2c.css?ver=5.2.4' type='text/css' media='all' />
<link rel='stylesheet' id='login-css'  href='wp-admin/css/login.min4d2c.css?ver=5.2.4' type='text/css' media='all' />
	<meta name='robots' content='noindex,noarchive' />
	<meta name='referrer' content='strict-origin-when-cross-origin' />
		<meta name="viewport" content="width=device-width" />
		</head>
	<body class="login login-action-login wp-core-ui  locale-en-us">
		<div id="login">
		<h1 id="txt"></h1>
	<!--<div id="login_error">	User registration is currently not allowed.<br />
</div>-->

	<form name="loginform" id="loginform" >
	<p>
		<label for="user_login">Username or Email Address<br />
		<input type="text" name="log" id="user_login" aria-describedby="login_error" class="input" value="" size="20" autocapitalize="off" /></label>
	</p>
	<p>
		<label for="user_pass">Password<br />
		<input type="password" name="pwd" id="user_pass" aria-describedby="login_error" class="input" value="" size="20" /></label>
	</p>
<!--	<p class="forgetmenot">-->
<!--		&lt;!&ndash;<label for="rememberme">-->
<!--			<input name="rememberme" type="checkbox" id="rememberme" value="forever"  />-->
<!--			Remember Me-->
<!--		</label>&ndash;&gt;-->
<!--	</p>-->
	<!--<p class="submit">
		<button type="button" name="wp-submit" id="wp-submit" class="button button-primary button-large"> Log In</button>
	</p>-->
	</form>

	<script type="text/javascript">
	function wp_attempt_focus(){
	setTimeout( function(){ try{
			d = document.getElementById('user_login');
				d.focus();
	d.select();
	} catch(e){}
	}, 200);
	}

			wp_attempt_focus();
			if(typeof wpOnload=='function')wpOnload();
			</script>

<!--			<p id="backtoblog"><a href="index.html">-->
<!--		&larr; Back to Event Management WordPress Theme	</a></p>-->
			
	</div>

	
			<script type="text/javascript">
			var wc_product_block_data = JSON.parse( decodeURIComponent( '%7B%22min_columns%22%3A1%2C%22max_columns%22%3A6%2C%22default_columns%22%3A3%2C%22min_rows%22%3A1%2C%22max_rows%22%3A6%2C%22default_rows%22%3A1%2C%22thumbnail_size%22%3A300%2C%22placeholderImgSrc%22%3A%22http%3A%5C%2F%5C%2Fdemo.ovathemes.com%5C%2Feventmana%5C%2Fwp-content%5C%2Fuploads%5C%2Fwoocommerce-placeholder.png%22%2C%22min_height%22%3A500%2C%22default_height%22%3A500%2C%22isLargeCatalog%22%3Afalse%2C%22limitTags%22%3Afalse%2C%22hasTags%22%3Afalse%2C%22productCategories%22%3A%5B%7B%22term_id%22%3A60%2C%22name%22%3A%22Uncategorized%22%2C%22slug%22%3A%22uncategorized%22%2C%22term_group%22%3A0%2C%22term_taxonomy_id%22%3A60%2C%22taxonomy%22%3A%22product_cat%22%2C%22description%22%3A%22%22%2C%22parent%22%3A0%2C%22count%22%3A0%2C%22filter%22%3A%22raw%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fdemo.ovathemes.com%5C%2Feventmana%5C%2Fproduct-category%5C%2Funcategorized%5C%2F%22%7D%2C%7B%22term_id%22%3A28%2C%22name%22%3A%22event%22%2C%22slug%22%3A%22event%22%2C%22term_group%22%3A0%2C%22term_taxonomy_id%22%3A28%2C%22taxonomy%22%3A%22product_cat%22%2C%22description%22%3A%22%22%2C%22parent%22%3A0%2C%22count%22%3A9%2C%22filter%22%3A%22raw%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fdemo.ovathemes.com%5C%2Feventmana%5C%2Fproduct-category%5C%2Fevent%5C%2F%22%7D%5D%2C%22homeUrl%22%3A%22http%3A%5C%2F%5C%2Fdemo.ovathemes.com%5C%2Feventmana%5C%2F%22%7D' ) );
		</script>
		<script>
			let baseurl = "http://localhost:8000";

			let url = window.location.href;
			console.log(url);
			let dummy = url.split('?action=')[1];
			console.log(dummy);
			let action = dummy.split('?type=')[0];
			console.log(action);
			let type = dummy.split('?type=')[1];
			console.log(type);
			if(action==="login") {
				f("txt","login");
				const login = async (data) => {
					let options = {
						headers: {'Content-Type': 'application/json'},
						method: 'POST',
						body: JSON.stringify(data)
					};

					try {
						let response = await fetch(baseurl + '/event/logIn/', options);                    // give api url
						let jsonResponse = await response.json();
						console.log(jsonResponse);

						return jsonResponse;
					} catch (e) {
						console.log(e);
						return null;
					}
				};
				const get_type = async (data1) => {
					let options = {
						headers: {'Content-Type': 'application/json'},
						method: 'POST',
						body: JSON.stringify(data1)
					};

					try {
						let response = await fetch(baseurl + '/event/getType/', options);                    // give api url
						//let jsonResponse = await response.json();
						console.log(response);

						return response;
					} catch (e) {
						console.log(e);
						return null;
					}
				};

				const authenticateUser = async () => {
					let email = document.getElementById("user_login").value;
					let password = document.getElementById("user_pass").value;
					console.log(email + " " + password);

					let data = {
						email,
						password
					};
					let response = await login(data);
					let userId = response.user_id;
					let data1 = {
						userId
					}
					//let response1 = await get_type(data1);
					//console.log(response1);
					console.log(response);
					if (response) {
						if(response.user_id===undefined){
							localStorage.setItem("orgId",response.org_id);
						}
						else {
							localStorage.setItem("userId", response.user_id);
						}
						window.location.replace('http://localhost:63342/EventManagement/frontend/evms/demo.ovathemes.com/eventmana/index.html');
					} else {
						iziToast.show({
							title:"Error",
							message:"Please check the fields",
							titleColor:'red',
							backgroundColor: 'yellow',
							onClosing: function(){
								window.location.reload();
							}
						});
					}

				};
				appendLoginInfo("loginform");
				function appendLoginInfo(variable) {
					console.log("hi");
					document.getElementById(variable).innerHTML +=
							'<p class="submit">\n' +
							'\t\t<button type="button" name="wp-submit" id="wp-submit" class="button button-primary button-large"> Log In</button>';
				}
				document.getElementById("wp-submit").onclick = authenticateUser;
			}
			else{
				
				const register = async (data) => {
					let options = {
						headers: {'Content-Type': 'application/json'},
						method: 'POST',
						body: JSON.stringify(data)
					};

					try {
						let response = await fetch(baseurl + '/event/newUser/', options);
						if(response.ok)
						{
							let jsonResponse = await response.json();
							console.log(jsonResponse);

							return jsonResponse;
						}else{
							return null;
						}
					} catch (e) {
						console.log(e);
						return null;
					}
				};
				f("txt","register");
				const registerUser = async () => {
					console.log('hi3');
					let email = document.getElementById("user_login").value;
					let password = document.getElementById("user_pass").value;
					let name = document.getElementById("user_name").value;
					let phn_no = document.getElementById("user_number").value;

					//let user_type;
					// if(document.getElementById('reg1').checked){
					// 	user_type = "Organisation";
					// }
					// else {
					// 	user_type = "Individual";
					// }
					if (type === 'Individual') {
						let dob = document.getElementById("user_dob").value;
						let gender;
						if (document.getElementById('r1').checked) {
							gender = "male";
						} else {
							gender = "female";
						}
						let user_type = type;
						console.log(email + " " + password + " "+ name + " " + phn_no + " " + gender + " " + dob + " " + type);
						let data = {
							email,
							password,
							name,
							phn_no,
							gender,
							dob,
							user_type,
						};
						let response = await register(data);

						if (response) {
							/*localStorage.setItem("userId",response.user_id);*/
							window.location.replace('http://localhost:63342/EventManagement/frontend/evms/demo.ovathemes.com/eventmana/index.html');
						} else {
							iziToast.show({
								title:"Error",
								message:"Please check the fields",
								titleColor:'red',
								backgroundColor: 'yellow',
								onClosing: function(){
									//window.location.reload();
								}
							});

						}
					}
					else {
						let orgLocation = document.getElementById("location").value;
						let user_type = type;
						let orgName = name;
						console.log(password);
						let data = {
							email,
							password,
							orgName,
							phn_no,
							orgLocation,
							user_type,
						};

						let response = await register(data);

						if (response) {
							/*localStorage.setItem("userId",response.user_id);*/
							window.location.replace('http://localhost:63342/EventManagement/frontend/evms/demo.ovathemes.com/eventmana/index.html');
						} else {
							iziToast.show({
								title: "Error",
								message: "Please check the fields",
								titleColor: 'red',
								backgroundColor: 'yellow',
								onClosing: function () {
									//window.location.reload();
								}
							});

						}
					}
				};

				appendLoginInfo("loginform");
				function appendLoginInfo(variable) {
					console.log("hi");
					let url = window.location.href;
					console.log(url);
					let dummy = url.split('?action=')[1];
					console.log(dummy);
					let action = dummy.split('?type=')[0];
					console.log(action);
					let type = dummy.split('?type=')[1];
					console.log(type);
					if (type==='Individual') {
						document.getElementById(variable).innerHTML +=
								'<p>\n' +
								'\t\t<label for="user_pass">Name<br />\n' +
								'\t\t<input type="text" name="pwd" id="user_name" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								'<p>\n' +
								'\t\t<label for="user_pass">Mobile Number<br />\n' +
								'\t\t<input type="number" name="pwd" id="user_number" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								'<p>\n' +
								'\t\t<label for="user_pass">Gender<br />\n' +
								'\t\t  <input type="radio" name="gender" value="male" id="r1"> Male<br>\n' +
								'  <input type="radio" name="gender" value="female" id="r2"> Female<br>\n' +
								'</label>\n' +
								'\t</p>' +
								'<p>\n\n' +
								'\t\t<label for="user_pass">Date Of birth<br />\n' +
								'\t\t<input type="date" name="pwd" id="user_dob" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								// '<p>\n' +
								// '\t\t<label for="register_as">Register As<br />\n' +
								// '\t\t  <input type="radio" name="register" value="organisation" id="reg1"> Organisation <br>\n' +
								// '  <input type="radio" name="register" value="Individual" id="reg2"> Individual <br>\n' +
								// '</label>\n' +
								'\t</p>' +
								'<p class="submit">\n' +
								'\t\t<button type="button" name="wp-submit" id="wp-submit" class="button button-primary button-large"> Log In</button>\n' +
								'\t</p>';
					}
					else{
						document.getElementById(variable).innerHTML +=
								'<p>\n' +
								'\t\t<label for="user_pass">Name<br />\n' +
								'\t\t<input type="text" name="pwd" id="user_name" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								'<p>\n' +
								'\t\t<label for="user_pass">Mobile Number<br />\n' +
								'\t\t<input type="number" name="pwd" id="user_number" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								'<p>\n' +
								'\t\t<label for="location">Location<br />\n' +
								'\t\t<input type="text" name="pwd" id="location" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								'\t</p>' +
								// '<p>\n' +
								// '\t\t<label for="user_pass">Gender<br />\n' +
								// '\t\t  <input type="radio" name="gender" value="male" id="r1"> Male<br>\n' +
								// '  <input type="radio" name="gender" value="female" id="r2"> Female<br>\n' +
								// '</label>\n' +
								// '\t</p>' +
								// '<p>\n\n' +
								// '\t\t<label for="user_pass">Date Of birth<br />\n' +
								// '\t\t<input type="date" name="pwd" id="user_dob" aria-describedby="login_error" class="input" value="" size="20" /></label>\n' +
								// '\t</p>' +
								// '<p>\n' +
								// '\t\t<label for="register_as">Register As<br />\n' +
								// '\t\t  <input type="radio" name="register" value="organisation" id="reg1"> Organisation <br>\n' +
								// '  <input type="radio" name="register" value="Individual" id="reg2"> Individual <br>\n' +
								// '</label>\n' +
								'\t</p>' +
								'<p class="submit">\n' +
								'\t\t<button type="button" name="wp-submit" id="wp-submit" class="button button-primary button-large"> Log In</button>\n' +
								'\t</p>';
					}
				}
				document.getElementById("wp-submit").onclick = registerUser;
			}
			function f(variable,action) {
				var s = document.getElementById(variable);
				if(action==="register"){
					s.textContent	 = " User Registration";
				}
				else{
					s.textContent = "User Login"
				}
				console.log(s.textContent);
			}
		</script>
			<div class="clear"></div>
	</body>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.js'></script>


</html>
	